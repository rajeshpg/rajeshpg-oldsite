
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>me.thoughts.map(_ => blog)</title>
  <meta name="author" content="Rajesh Pitty">

  
  <meta name="description" content="Here we are going to write a very simple parser that parses a very simple expression like key=value, for e.g. name=Rajesh
and extract the required &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://rajeshpg.github.io/">
 <!--  <link href="/favicon.png" rel="icon"> -->
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="http://feeds.feedburner.com/rajeshpg" rel="alternate" title="me.thoughts.map(_ => blog)" type="application/atom+xml">
  <link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-1178930-4']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


  <link rel="author" href="https://plus.google.com/116621740117325086392"/>
</head>

<body   >
  <header role="banner"><hgroup>
 <!-- <div id="logo">
  	<div id="logoLeft">{</div>
  	<div id="logoText">mob</div>
  	<div id="logoRight">}</div>
  	<div class="clear"></div>
  </div>-->
  <h1><a href="/">me.thoughts.map(_ => blog)</a></h1>
  
  <div class="clear"></div>
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss email">
  <li><a href="http://feeds.feedburner.com/rajeshpg" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
    <li><a href="http://feedburner.google.com/fb/a/mailverify?uri=rajeshpg&amp;loc=en_US" rel="subscribe-email" title="subscribe via email">Email</a></li>
  
</ul>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/blog/2013/03/06/scala-parsers-combinators-example/">Scala Parsers Combinators Example</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2013-03-06T17:00:00+05:30" pubdate data-updated="true">Mar 6<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Here we are going to write a very simple parser that parses a very simple expression like <code>key=value</code>, for e.g. <code>name=Rajesh</code>
and extract the required value <code>Rajesh</code> out of the expression.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2013/03/06/scala-parsers-combinators-example/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/blog/2013/02/28/a-giter8-template-for-liftweb/">A Giter8 Template for Liftweb</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2013-02-28T22:34:00+05:30" pubdate data-updated="true">Feb 28<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I have created a <a href="http://github.com/n8han/giter8">giter8</a> template <a href="https://github.com/rajeshpg/liftweb-twitter-bootstrap.g8">liftweb-twitter-bootstrap.g8</a> for <a href="http://liftweb.com">liftweb</a> applications with <a href="http://twitter.github.com/bootstrap/">twitter-bootstrap</a>.</p>

<h4>Prerequisite</h4>

<ul>
<li><a href="https://github.com/n8han/conscript">Conscript</a></li>
<li><a href="https://github.com/n8han/giter8">Giter8</a></li>
</ul>


<h4>Usage</h4>

<pre><code>$ g8 rajeshpg/liftweb-twitter-bootstrap  

template for liftweb app with twitter-bootstrap

package [com.myliftwebapp]:
name [My Liftweb App]:
liftweb_version [2.4]:
scala_version [2.9.1]:

$ cd my-liftweb-app  
</code></pre>

<p>Eclipse users can run the following command and import the project.</p>

<pre><code>$ mvn eclipse:eclipse  
</code></pre>

<p>IntelliJ users can run the following command and import the project.</p>

<pre><code>$ mvn idea:idea  
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/blog/2013/02/07/liftweb-development-environment-setup/">Liftweb Development Environment Setup</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2013-02-07T15:52:00+05:30" pubdate data-updated="true">Feb 7<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content">
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/blog/2013/01/25/creating-custom-maven-archetype/">Creating Custom Maven Archetype</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2013-01-25T12:29:00+05:30" pubdate data-updated="true">Jan 25<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://maven.apache.org/">Maven</a> makes it easy to create a project from a skeleton using the archetypes. But most of the time many of the archetype does not work out of the box.</p>

<p>Having a skeleton project with most of the default configurations always comes in handy. It saves time creating/writing configuration files for Spring, Hibernate&hellip; etc.</p>

<p>How about creating an archetype for our project and have it in our local Maven repository or publish it in public repository or in github ?</p>

<p>[grab your favourite beverage, this is a little long post.]</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2013/01/25/creating-custom-maven-archetype/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/blog/2012/10/23/scala-class-mixin-and-composition-a-practical-example-contd/">Scala Class Mixin and Composition - a Practical Example, Contd&#8230;</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2012-10-23T11:10:00+05:30" pubdate data-updated="true">Oct 23<span>rd</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>In the <a href="http://rajeshpg.com/blog/2012/10/scala-class-mixin-and-composition-a-practical-example/">previous post</a> we saw how to a create validator with a policy and filter data read from an excel.</p>

<p>Lets create another validator to check for discount types of a sales order and validate the sales data using the two validators and filter the data.</p>

<p>What we need is a <code>DiscountTypeValidator</code> to check for discount types allowed(<code>Policy</code>)</p>

<div><script src='https://gist.github.com/3937107.js'></script>
<noscript><pre><code></code></pre></noscript></div>


<p>here is the updated <code>process</code> method</p>

<div><script src='https://gist.github.com/3937206.js'></script>
<noscript><pre><code></code></pre></noscript></div>


<p>in line 12 we create another anonymous class for <code>DiscountTypeValidator</code> with a <code>Policy</code> <code>DiscountTypeAllowed</code> with a list <code>allowedDiscountTypes</code> that holds a list of discount type codes.</p>

<p><code>DiscountTypeValidator</code> takes column index of the discount type as Int parameter. The <code>validator</code> method checks whether the discount type mentioned in the excel is allowed or not and then returns a list of booleans.</p>

<p>So now we have list of data <code>worksheet</code> from excel  and lists of booleans <code>mfValidationResult</code> and  <code>discTypeValidationResult</code> that represents the validation result of <code>Validator</code>s for each row in the excel.</p>

<p>In line 15 we create a list of tuple containing the row object and one of the validation result,say <code>mfValidationResult</code> using  <code>zip</code> method of <code>scala.List</code>(actually trait <code>IterableLike</code>).</p>

<p><code>validationResult</code> looks like this</p>

<pre><code>List((org.apache.poi.hssf.usermodel.HSSFRow@2200d5,true), (org.apache.poi.hssf.usermodel.HSSFRow@64ab4d,false),...)  
</code></pre>

<p>We have to zip the  <code>discTypeValidationResult</code> also with <code>validationResult</code> using <code>zipResults</code> method.</p>

<p>There is no convenient method in scala to zip a tuple say (1,2) with another value say 3 so that we get (1,2,3) instead of ((1,2),3).</p>

<p>The snippet <code>zipResults(validationResult, discTypeValidationResult)</code> combines the validation results and gives a simple tuple containing the row object the validation result on the object.</p>

<p>Finally <code>validationResult.filter(_._2).map(_._1)</code> filters the sales data based on the validation result and returns the valid data.</p>

<p>Scala mixin and compostion is very comprehensive and convenient compared to Spring IoC.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/blog/2012/10/16/scala-class-mixin-and-composition-a-practical-example/">Scala Class Mixin and Composition - a Practical Example</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2012-10-16T11:58:00+05:30" pubdate data-updated="true">Oct 16<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I am porting a part of a module written in Java to Scala. Lets consider the following 2 requirements alone. The second requirement is the one we are going to focus on.</p>

<h2>Requirement:</h2>

<pre><code>1. Read data from an excel file containing orders(material purchase order)
2. Validate the data   
    a. check for mandatory fields.  
    b. check for allowed discount types.
</code></pre>

<p>The Java version is built using Spring IOC. The Scala version is built using the <a href="http://jonasboner.com/2008/10/06/real-world-scala-dependency-injection-di/">cake pattern</a> that  is similar to the dependency injection, but very light weight since it is built on the features available in the core of the Scala language.</p>

<h3>The implementation</h3>

<p>what we need is a <code>Validator</code> that <code>validate</code>s an object <code>T</code> based on a <code>Policy</code>.  So what we have now is the following <a href="http://www.scala-lang.org/node/126">traits</a>.</p>

<div><script src='https://gist.github.com/3898533.js'></script>
<noscript><pre><code></code></pre></noscript></div>


<p>Considering the requirement 2.a, we need a validator that checks for mandatory fields in the excel sheet. We will create a <code>MandatoryFieldsValidator</code> that <code>validate</code>s every <a href="http://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/Row.html"><code>Row</code></a> for presence of the mandatory fields.<br/>
But there are n types of format for the order data in excel sheet. Every format has different mandatory fields.<br/>
For example type 1 sheet has columns 1, 3, 6, 8 as mandatory fields, type 2 sheet has columns 0, 2, 5, 10 as mandatory fields.</p>

<p>Hence we have  <code>MandatoryFieldsPolicy</code> with index of the mandatory fields and the <code>MandatoryFieldsValidator</code></p>

<div><script src='https://gist.github.com/3898737.js'></script>
<noscript><pre><code></code></pre></noscript></div>


<p>and here is the actual mixin where we mix validator with policy based on the type of data in the excel sheet<br/>
 <div><script src='https://gist.github.com/3898758.js'></script>
<noscript><pre><code></code></pre></noscript></div></p>

<p>In the <a href="http://rajeshpg.com/blog/2012/10/scala-class-mixin-and-composition-a-practical-example-contd/">next post</a> we&rsquo;ll see filtering data based on multiple validations.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/blog/2012/10/10/learning-liftweb-part1/">Learning Liftweb Part1</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2012-10-10T15:42:00+05:30" pubdate data-updated="true">Oct 10<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content">
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/blog/2012/09/07/how-to-handle-ora-01795-in-hibernate/">HOW to Handle ORA-01795 in Hibernate</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2012-09-07T16:05:00+05:30" pubdate data-updated="true">Sep 7<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><strong>ORA-01795 maximum number of expressions in a list is 1000</strong> is an error that one encounters very rarely.</p>

<p>But I did encounter recently, while querying a table using hibernate.</p>

<p>Lets&#8217; assume an employee table needs to be queried for employee<strong>s</strong> (note the plural) based on employee code<strong>s</strong>.</p>

<p>The query would be:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">tbl_employee</span> <span class="k">where</span> <span class="n">employee_code</span> <span class="k">in</span> <span class="p">(</span><span class="mi">1001</span><span class="p">,</span><span class="mi">1002</span><span class="p">...</span><span class="mi">2003</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>But the query will result in error <strong>ORA-01795 maximum number of expressions in a list is 1000</strong>, <br/>
particularly in Oracle(I havent tried in this other dbs&#8217;).</p>

<p>Thats&#8217; the problem statement, and lets see the possible solutions.</p>

<ul>
<li>Construct SQL/HQL(incase of hibernate) with <code>or</code> clause along with the <code>in</code> clause.<br/>
The more or clausess the more it hits the performance. Thats&#8217; what i heard many SQL gurus told in blogs and forums.</li>
</ul>


<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">tbl_employee</span> <span class="k">where</span> <span class="n">employee_code</span> <span class="k">in</span> <span class="p">(</span><span class="mi">1001</span><span class="p">,</span><span class="mi">1002</span><span class="p">,...</span><span class="mi">2000</span><span class="p">)</span> <span class="k">or</span> <span class="n">employee_code</span> <span class="k">in</span> <span class="p">(</span><span class="mi">2001</span><span class="p">,</span><span class="mi">2002</span><span class="p">,...</span><span class="mi">3000</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Construct Query using Hibernate Criteria(the reason for this post) <br/>
The code creates SQL query thats similar to the one above.<br/>
The Hibernate <a href="http://www.docjar.com/docs/api/org/hibernate/criterion/Disjunction.html">Disjunction</a>(line no 12) is used to group expressions in a single disjunction,<br/>
i.e. <code>select * from ... where... in X or Y or Z</code><br/>
X,Y,Z being conditions.</li>
</ul>


<div><script src='https://gist.github.com/3665691.js'></script>
<noscript><pre><code></code></pre></noscript></div>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/blog/2012/09/07/maximum-subarray-problem-solved-using-scala/">Maximum Subarray Problem Solved Using Scala</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2012-09-07T14:52:00+05:30" pubdate data-updated="true">Sep 7<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>my <a href="http://rerun.me" title="rerun">friend</a> <a href="http://twitter.com/arunma" title="Arun in Twitter">Arun</a> wrote a <a href="http://rerun.me/blog/2012/08/30/maximum-continuous-subarray-problem-kandanes-algorithm/" title="Kadanes' Alogrithm">blog post</a> on solving  <a href="http://en.wikipedia.org/wiki/Maximum_subarray_problem" title="maximum Subarray problem">Maximum subarray problem</a> using Java and asked if i could give it a try.<br/>
So here it is in Scala.</p>

<div><script src='https://gist.github.com/3528839.js'></script>
<noscript><pre><code></code></pre></noscript></div>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/blog/2011/09/23/learning-a-new-programming-language/">Learning a New Programming Language</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2011-09-23T13:49:33+05:30" pubdate data-updated="true">Sep 23<span>rd</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><blockquote><p>Learn at least one new language every year. Different languages solve the same problems in different ways. By learning several different approaches, you can help broaden your thinking and avoid getting stuck in a rut.</p><footer><strong>Andy Hunt</strong> <cite>Dave Thomas - the Pragmatic Programmer</cite></footer></blockquote>



</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/2/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    
<section>
  <h1>Stack Overflow</h1>
  <a href="http://stackoverflow.com/users/558262/rajesh">
  <img src="http://stackoverflow.com/users/flair/558262.png?theme=dark" width="208" height="58" alt="profile for rajesh at Stack Overflow, Q&amp;A for professional and enthusiast programmers" title="profile for rajesh at Stack Overflow, Q&amp;A for professional and enthusiast programmers">
  </a>
</section>

<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/03/06/scala-parsers-combinators-example/">Scala Parsers Combinators Example</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/02/28/a-giter8-template-for-liftweb/">A Giter8 Template for Liftweb</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/02/07/liftweb-development-environment-setup/">Liftweb Development Environment Setup</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/01/25/creating-custom-maven-archetype/">Creating Custom Maven Archetype</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/10/23/scala-class-mixin-and-composition-a-practical-example-contd/">Scala Class Mixin and Composition - a practical example, contd&#8230;</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/rajeshpg">@rajeshpg</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'rajeshpg',
            count: 2,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>



<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/116621740117325086392?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Rajesh Pitty -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'rajeshpg';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
